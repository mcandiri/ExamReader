@page "/demo"
@inject ExamReader.Web.Services.DemoService DemoService
@inject ExamReader.Web.Services.ExamSessionService SessionService
@inject NavigationManager Navigation

<PageTitle>Demo Mode - ExamReader</PageTitle>

@if (_loading)
{
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading demo data...</p>
    </div>
}

@code {
    private bool _loading = true;

    protected override async Task OnInitializedAsync()
    {
        _loading = true;
        StateHasChanged();

        // Small delay for visual feedback
        await Task.Delay(300);

        var exam = DemoService.GetExamDefinition();
        var options = DemoService.GetGradingOptions();
        var results = DemoService.GetResults();
        var analytics = DemoService.GetAnalytics();

        SessionService.SetResults(exam, options, results, analytics, isDemo: true);

        _loading = false;
        Navigation.NavigateTo("/results");
    }
}
